#!/bin/bash

cd ../Binaries
nasm -f bin boot.asm -o boot.bin
gcc kernel.c -o kernel.bin
mv kernel.exe ../Build/kernel.bin
mv boot.bin ../Build/boot.bin
cd ../Build
dd if=/dev/zero of=floppy.img bs=512 count=2880
/sbin/mkfs.fat -F 12 -n "MyOS" floppy.img
mcopy -i floppy.img text.txt ::/
mcopy -i floppy.img kernel.bin ::/
dd if=boot.bin of=floppy.img conv=notrunc

qemu-system-x86_64 -fda floppy.img

